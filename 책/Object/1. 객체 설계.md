# 1. 객체 설계

소프트웨어 모듈이 가져야 하는 세가지 기능

-   실행 중에 제대로 동작하는것
-   변경을 위해 존재하는 것
-   코드를 읽는 사람과 의사소통하는 것

```java
public void enter(Audience audience) {
        if (audience.getBag().hasInvitation()) {
            Ticket ticket = ticketSeller.getTicketOffice().getTicket();
            audience.getBag().setTicket(ticket);
        } else {
            Ticket ticket = ticketSeller.getTicketOffice().getTicket();
            audience.getBag().minusAmount(ticket.getFee());
            ticketSeller.getTicketOffice().plusAmount(ticket.getFee());
            audience.getBag().setTicket(ticket);
        }
    }
```

Theater 클래스의 enter 메서드가 수행하는 일<Br>
소극장(Theater)은 관람객(Audience)의 가방(Bag)을 열어 그 안에 초대장(Invitation)이 들어 있는지 살펴본다. 가방 안에 초대장이 들어 있으면 판매원(TicketSeller)은 매표소(TicketOffice)에 보관되있는 티켓을 관람객의 가방안으로 옮긴다. 가방 안에 초대장이 들어 있지 않다면 관람객의 가방에서 티켓 금액만음 현금을 꺼내 매표소에 적립한 후에 매표소에 보관돼 있는 티켓을 관람객의 가방안으로 옮긴다.

**문제점 : 관람객과 판매원이 소극장의 통제를 받는 수동적인 존재**

-   문제점들

    -   관람객의 입장에서는 소극장이라는 3자가 초대장 확인을 위해 마음대로 가방을 열어본다.

    -   판매원 입장에서는 소극장이 매표소에 보관중인 티켓과 현금에 마음대로 접근할 수 있어 문제다.

    -   제일 큰 문제는 소극장이 이일을 수행한다는 점

    -   코드를 이해하기 위해서는 여러 가지 세부적인 내용들을 기억하고 있어야한다.(체이닝 형식으로 되어있어서 디미터의 법칙을 준수하자.)

    -   변경에 취약함 서로 너무 많은 의존을 가지고 있음(결합도가 높다.)

위 코드는 우리의 예상을 벗어난 코드다.

현실에서 수행하는 일<br>
관람객이 직접 자신의 가방에서 초대장을 꺼내 판매원에게 건낸다. 티켓을 구매하는 관람객은 가방 안에서 돈을 직접 꺼내 판매원에게 지불한다. 판매원은 매표소에 있는 티켓을 직접 꺼내 관람객에게 건네고 관람객에게서 직접 돈을 받아 매표소에 보관한다. 코드와 전혀 다르다.

## 개선하기

Theater가 Audience와 TicketSeller에 관해 내부정보를 알지 못하도록 정보를 차단하자.

관람객에 가방을 가지고 있다는 사실과 판매원이 매표소에서 티켓을 판매한다는 사실을 Theater가 알아야 할 필요가 없다. 관람객과 판매원을 자율적인 존재로 만들자.

객체내부의 상태를 캡슐화 하고 객체간에 오직 메시지를 통해서만 상호작용 하도록 만드는 것

밀접하게 연관된 작업만을 수행하고 연관성 없는 작업은 다른 객체에게 위임하는 객체를 응집도가 높다고 말한다.

객체 스스로 자신의 데이터를 책임져야 한다.

### 절차지향과 객체지향

절자지향 : 프로세스와 데이터를 별도의 모듈이 위치시키는 방식 (개선전 방식) 책임이 하나의 클래스에 집중

객체지향 : 데이터와 프로세스가 동일한 모듈 내부에 위치하도록 프로그래밍 하는 방식(개선 후 방식) 각 객체에게 책임이 있음

설계를 어렵게 만드는 것은 의존성이이다. 불필요한 의존성을 제거하여 결합도를 낮추자

---

-   어떤 기능을 설계하는 방법은 한가지 이상일 수 있다.
-   동일한기능을 한가지 이상의 방법으로 설계할수 있기에 결국 설계는 트레이드 오프의 산물이다.

현실에서는 수동적인 존재라고 하더라도 객체지향의 세계에 들어오면 능동적이고 자율적인 존재로 바뀐다. 의인화 라고 부른다.

### 객체 지향 설계

요구하는 기능을 온전히 수행하면서 변경을 매끄럽게 수용하는게 좋은 설계

메시지를 전송하기 위한 이런 지식이 두 객체를 결합시키고 이 결합이 객체 사이의 의존성을 만든다.

협력하는 객체사이의 의존성을 적절하게 관리해야함
