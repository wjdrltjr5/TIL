# Single Block vs MultiBlock I/O

읽고자하는 블록을 버퍼 캐시에서 찾지 못했을 때, I/O Call을 통해 데이터파일로부터 버퍼 캐시에 적재하는 방식에는 크게 두 가지가 있다.

-   Single Block I/O : 말 그대로 한번의 I/O Call에 하나의 데이터 블록만 읽어 메모리에 적재하는 것을 말한다.

    -   인덱스를 통해 테이블을 액세스할 때는 기본적으로 인덱스와 테이블 블록 모두 이 방식을 사용한다.

-   Multi Block I/O : I/O Call이 필요한 시점에 인접한 블록들을 같이 읽어 메모리에 적재하는것을 말한다.

테이블 Full Scan처럼 물리적으로 저장된 순서에 따라 읽을 때는 그릇이 허용하는 범위 내에서 인접한 블록들을 같이 읽는 것이 유리하다.

인덱스의 경우에는 논리적 순서는 물리적으로 데이터파일에 저장된 순서와 다르기 때문에 해당 블록을 여러개 적재해 올렸을때 논리적 순서로 한참 뒤 쪽에 위치할 수 있다. 그러면 해당 블록들은 실제 사용되지 못한 채 버퍼상에서 밀려나는일이 생길 수 있기 떄문에 Single Block I/O 방식으로 읽는게 효과적

서버 프로세스는 디스크에서 블록을 읽어야 하는 시점마다 I/O 서브 시스템에 I/O 요청을 하고 대기 상태에 빠진다.

-   db file sequential read 대기 이벤트 : Single Block I/O 방식으로 요청할 때 발생

-   db file scattered read 대기 이벤트 : Multiblock I/O 방식으로 I/O요청할 때 발생

대량의 데이터를 Multiblock I/O 방식으로 읽을 때 Single Block I/O보다 성능상 유리한 것은 I/O Call 발생횟수를 그만큼 줄여주기 때문이다.

10g 부터는 Index Range Scan 또는 Index Full Scan일 때도 MultiBlock I/O방식으로 읽는 경우가 있는데 위처럼 테이블 액세스 없이 인덱스만 읽고 처리할 때가 그렇다(커버링 인덱스 상황) + Index Fast Full Scan

여전히 테이블 액세스할때는 모두 Single Block I/O 사용

Single block I/O방식으로 읽은 블록들은 LRU 리스트상 MRU으로 연결되어 한번 적재되면 버퍼 캐시에 오래 머문다.

반먼 MultiBlock I/O방식으로 읽은 블록들은 LRU 리스트에서 LRU쪽에 연결되므로 적재되고 얼마 지나지 않아 버퍼 캐시에서 밀려난다.

따라서 대량의 데이터를 Full Scan 했다고 해서 사용빈도가 높은 블록들이 버퍼 캐시에서 모두 밀려날 것을 우려하지 않아도 된다.
