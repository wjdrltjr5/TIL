# 뒤엉킨 변경

코드를 수정할 때는 시스템에서 고쳐야 할 딱 한 군데를 찾아서 그 부분만 수정할 수 있기를 바란다. 이렇게 할 수 없다면 뒤엉킨 변경과 산탄총 수술 중 하나가 풍긴다.

뒤엉킨 변경은 SRP가 제대로 지켜지지 않을 때 나타난다. 하나의 모듈이 서로 다른 이유들로 인해 여러 가지 방식으로 변경되는 일이 많을 때 발생한다.

ex DB가 추가될 떄마다 함수 세 개를 바꿔야 하고, 금융 상품이 추가될 때 마다 또 다른 함수 4개를 바꿔야 하는 모듈이 있다면 뒤엉킨 변경이 발생한 것.

DB에서 데이터를 가져와서 금융상품 로직에서 처리애햐 하는 일처럼 순차적으로 실행되는 게 자연스러운 맥락이라면, 맥락에 필요한 데이터를 특정한 데이터 구조에 담아 전달하게 하는 식으로 단계를 분리한다.(`단계 쪼개기`)

전체 처리 과정 곳곳에서 각기 다른 맥락의 함수를 호출하는 빈도가 높다면 각 맥락에 해당하는 적당한 모듈들을 만들어 관련 함수들을 모은다.(`함수 옮기기`)

여러 맥락의 일에 관여하는 함수가 있다면 옮기기 전에 `함수 추출하기`부터 수행한다. 모듈이 클래스라면 `클래스 추출하기`가 맥락별 분리 방법을 잘 안내해줄 것이다.
