# 가변 데이터

함수형 프로그래밍에서는 데이터는 절대 변하지 않고, 데이터를 변경하려면 반드시(원래 데이터는 그대로 둔채) 변경하려는 값에 해당하는 복사본을 만들어서 반환한다는 개념을 기본으로 삼고 있다.

하지만 함수형 언어가 프로그래밍에서 차지하는 비중은 여전히 적고 변수 값을 바꿀 수 있는 언어를 사용하는 프로그래머가 더 많다.

`변수 캡슐화하기`를 적용하여 정해놓은 함수를 거쳐야만 값을 수정할 수 있도록 하면 수정을 감시하거나 코드를 개선하기 쉽다.

하나의 변수에 용도가 다른 값들을 저장하느라 값을 갱신하는 경우라면 `변수 쪼개기`를 이용하여 용도별로 분리한다.

갱신 로직은 다른 코드와 떨어트려 놓는 것이 좋다. `문장 슬라이드하기`와 `함수 추출하기`를 이용해서 무언가를 갱신하는 코드로부터 부작용이 없는 코드를 분리한다.

API를 만들때 `질의 함수오 변경 함수 분리하기`를 활용해서 꼭필요한 경우가 아니라면 부작용이 있는 코드를 호출할 수 없게 한다.

`세터 제거하기`도 적용한다. 값을 다른 곳에서 설정할 수 있는 가변 데이터가 풍기는 악취는 특히 고약하다. `파생 변수를 질의 함수로 바꾸기`

`여러 함수를 클래스로 묶기`나 `여러 함수를 변환함수로 묶기`를 활용해서 변수를 갱신하는 코드들의 유효범위를 제한한다.

구조체처럼 내부 필드에 데이터를 담고 있는 변수라면 `참조를 값으로 바꾸기`를 적용해서 구조체를 통째로 교체하는 편이 낫다.
