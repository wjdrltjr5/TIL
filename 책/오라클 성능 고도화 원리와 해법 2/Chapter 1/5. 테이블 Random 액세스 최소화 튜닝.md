# 테이블 Random 액세스 최소화 튜닝

Random 액세스를 최소화 하기 위한 튜닝 방안

## 인덱스 컬럼 추가

인덱스를 새로 만드는건 부담스럽지만 기존 인덱스에 필요한 컬럼만 추가하는 것만으로 큰 효과를 얻을 수 있다.

## PK 인덱스에 컬럼 추가

NL 조인할 때 Inner 쪽에서 액세스될 때는 Random 액세스 부하가 만만치 않다.

특히 Outer 테이블에서 Inner 테이블 쪽으로 조인 액세스가 많은 상황에서 Inner 쪽 필터 조건에 의해 버려지는 레코드가 많다면 그 비효율은 매우 심각한 것일 수 있다.

PK 인덱스에는 컬럼을 추가할 수 없다. 그러다 보니 PK 컬럼 + 필터조건 컬럼 형태의 새로운 Non-Unique 인덱스를 추가하는 경우가 종종있다.

그럴 때 Non-Unique 인덱스를 이용해 PK제약을 설정한다면 인덱스 개수를 줄일 수 있다.

PK제약에는 중복 값 확인을 위한 인덱스가 반드시 필요하다. 인덱스가 없다면 값이 입력될 때마다 테이블 전체를 읽어 중복 값 존재 여부를 체크해야 하기 때문

중복 체크를 위해 반드시 Unique인덱스가 필요한 것은 아니며 Non-Unique 인덱스로도 가능하다.

Non-Unique 인덱스를 이용하면 중복 여부를 체크할 때 one-plus 스캔이 발생하는 약간의 비효율이 있기는 하지만 무시할 만하다.

PK제약을 위해 Non-Unique인덱스를 사용하도록 하는방법은 다음과 같다.

```

```
