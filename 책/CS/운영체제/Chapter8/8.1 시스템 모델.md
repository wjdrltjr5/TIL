# 시스템 모델

시스템은 경쟁하는 스레드들 사이에 분배되어야 할 유한한 수의 자원들로 구성된다.

이들 자원은 다수의 유형으로(또는 클래스로) 분할되며, 이들 각각은 동등한 다수의 인스턴스(instance)들로 구성된다. CPU 주기, 파일, 그리고 입/출력 장치(네트워크 인터페이스 등) 등이 자원 유형들의 예이다.

Mutex락과 세마포같이 다양한 동기화 도구도 시스템자원이며, 현대 컴퓨터 시스템에서는 가장 일반적인 교착 상태의 발원지이다.

락은 일반적으로 특정 자료구조와 연관되어 있다. 하나의 락은 큐에 대한 엑세스를 보하고 다른 하나는 연결리스트에 대한 액세스를 보호하는데 사용될 수 있다. 이러한 이유로 락의 각 인스턴스에는 일반적으로 고유한 자원 클래스가 할당된다.

스레드는 다른 프로세스의 자원을 사용할 수 있으며 이러한 자원 사용으로 인해 교착 상태가 발생할 수 있다.

스레드는 자원을 사용하기 전에 반드시 요청해야 하고, 사용 후에는 반드시 발출해야 한다.

프로세스는 다음 순서로만 자원을 사용할 수 있다.

-   요청 : 스레드는 자원을 요청한다. 즉시 허용되지 않으면 대기한다.

-   사용 : 스레드는 자원에 대해 작업을 수행할 수 있다.

-   방출 : 스레드가 자원을 방출한다.

자원의 요청과 방출은 시스템 콜이다. (request(), release(), open(), close(), allocate() free())

스레드가 커널이 관리하는 자원을 사용할 때마다 매번 운영체제는 스레드가 요청했는지와 할당받았는지를 확인한다.

시스템 테이블이 각 자원이 가용 상태인지 또는 할당되었는지 기록하며, 각 할당된 자원에 대해서는 어느 스레드에 할당되었는지도 기록한다.

어떤 스레드가 현재 다른 스레드에 할당된 자원을 요청하면, 그 자원을 기다리는 스레드 큐에 입력될 수 있다.

한 스레드 집합 내의 모든 스레드가 그 집합 내의 다른 스레드에 의해서만 발생할 수 있는 이벤트를 기다린다면 그 세르드 집합은 교착상태에 있다

교착 상태를 설명하기 위해 식사하는 철학자 문제를 참조하라. 자원은 젓가락으로 모든 철학자갇 동시에 배가 고프고 각 철학자가 왼쪽에 있는 젓가락을 잡으면 사용 가능한 젓가락이 없다.

다중 스레드 응용 개발자는 반드시 교착 상태의 가능성을 염두에 두어야 한다. 락킹 도구들은 경쟁 조건을 회피하도록 설계되었다. 그러나 이러한 도구를 사용할때 개발자는 락이 획독되고 방출되는 방식에 대해 주의를 기울여야 한다.
