# 타입과 추상화

해리 벡의 지하철 노선도는 불필요한 지형 정보를 제거함으로써 단순함을 달성한 추상화.

추상화란 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 본질을 드러나게 하는 과정 또한 훌룡한 추상화는 목적에 부합하는 것이어야 함.

어떤 추상화도 의도된 목적이 아닌 다른 목적으로 사용된다면 오도될 수 있다. 추상화의 수준, 이익, 가치는 목적에 의존적이다.

추상화 : 어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다.

추상화는 두 차원에서 이뤄진다

-   첫 번째 차원은 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것이다.

-   두 번째 차원은 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것이다.

모든 경우의 추상화의 목적은 복잡성을 단순화하는 것.

### 객체 지향화 추상화

기껏해야 트럼프에 불과해 -> 정원사, 병사, 왕자, 공주를 단순화

#### 그룹으로 나누어 단순화 하기

공통점을 기반으로 객체들을 묶기 위한 그릇을 개념(concept)라고 한다.

자동차, 비행기, 인간, 책상, 모니터 ....

개념을 이용하면 객체를 여러 그룹으로 분류(classification)할 수 있다. 트럼프와, 토끼

객체에 어떤 개념을 적용하는 것이 가능해서 개념 그룹의 일원이 될 때 객체를 그 개념의 인스턴스(instance)라고 한다.

**객체란 특정한 개념을 적용할 수 있는 구체적인 사물을 의미한다. 객념이 객체에 적용됐을 때 객체를개념의 인스턴스라고 한다.**

#### 개념의 세 가지 관점

-   심볼(symbol): 개념을 가리키는 간략한 이름이나 명칭 (트럼프)
-   내연(intension): 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부를 확인할 수 있다. (몸이 납작하고...)
-   외연(extension): 개념에 속하는 모든 객체의집합(set) (정원사, 여왕...)

#### 객체를 분류하기 위한 틀

외연의 관점에서 어떤 객체에 어떤 개념을 적용할 수 있다는 것은 동일한 개념으로 구성된 객체 집합에 해당 객체를 포함시킨다는 것을 의미한다.

**분류란 객체에 특정한 개념을 적용하는 작업이다. 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하고 있는 것이다.**

분류는 객체지향의 중요한 개념 중 하나다. 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정한다.

객체를 적절한 개념에 따라 분류하지 못한 애플리케이션은 유지보수가 어렵고 변화에 쉽게 대처하지 못한다.

최대한 직관적으로 분류하자.

#### 분류는 추상화를 위한 도구다.

공통점을 취하고 차이점은 버리고 중요한 부분 강조를 위해 불필요한 세부사항을 제거해 단순화 하는 추상화는 개념을 통해 객체를 분류할때 사용한다.

트럼프라는 개념으로 묶은 것은 첫번째 차원인 일반화 이고, 두손과 두발 네모난 몸등은 불필요한 세부사항을 제거한 두번째 차원인다.

#### 타입

타입의 정의는 개념과 동일하다. 공통점을 기반으로 객체들을 묶기 위한 틀이다.

#### 데이터 타입

컴퓨터에 살아가는 데이터를 목적에 따라 분류하기 시작하면서 프로그래밍 언어 안에는 서서히 타입 시스템이 자라나기 시작했다. 타입 시스템은 메모리 안에 저장된 0과 1에대해 수행 가능한 작업과 불가능한 작업을 구분함으로써 데이터가 잘못 사용되는 것을 방지한다.

-   타입은 데이터가 어떻게 사용하느냐에 관한 것이다. 어떤 데이터에 어떤 연산자를 적용할수 있느냐가 타입을 결정한다.

-   타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다. 숫자형 데이터에 적용할 수 있는 산술연산자를 알고 있다면 메모리 내부에 숫자가 어떤 방식으로 저장되는지를 모르더라도 숫자형 데이터를 사용할 수 있다.

**데이터 타입은 메모리 안에 저장된 데이터의 종류를 분류하는데 사용하는 메모리 집합에 관한 메타데이터다. 데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.**

#### 객체와 타입

객체를 타입에 따라 분류하고 그 타입에 이름을 붙이는 것은 결국 프로그램에서 사용할 새로운 데이터 타입을 선언하는 것과 같다.

객체의 행동에 따라 상태가 변하고 모든 상태를 모으면 애플리케이션에서 관리해야 하는 전체 데이터를 표현할 수 있다.

앞의 데이터 타입에 대한 두가지 조언은 객체의 타입에도 동일하게 적용된다.

-   어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동이다. 동일한 행동을 수행한다면 동일한 타입이다.

-   객체의 내부적인 표현은 외부로부터 철저하게 감춰진다. 객체의 행동을 가장 효과적으로 수행할 수만 있다면 객체 내부의 상태를 어떤 방식으로 표현하더라도 무방하다.

#### 행동이 우선이다.

객체의 내부 표현 방식이 다르더라도 어떤 객체들이 동일하게 행동(책임)한다면 그 객체들은 동일한 타입에 속한다.

그 객체가 어떤 데이터를 가지고 있는지는 우리의 관심사가 아니다. 그 객체가 다른 객체와 동일한 데이터를 가지고 있더라도 다른 행동을 한다면 그 객체들은 서로 다른 타입으로 분류돼야 한다.

**결론적으로 객체의 타입을 결정하는 것은 행동뿐이다. 이것은 객체지향 패러다임을 특징 짓는 중요한 몇 가지 원리와 원칙에 의미를 부여한다.**

-   다형성: 동일한 요청에 다른 방식으로 응답할 수 있는 능력.(동일한 메시지를 서로 다른 방식으로 처리하기 위해서는 객체들은 동일한 메시지를 수신할 수 있어야 하기 때문에 결과적으로 동일한 타입에 속하게 된다.)

-   캡슐화 : 내부 표현 방식이 무관하고 행동만이 고려 대상이라는 것은 내부 데이터를 감춰야 한다는 것을 의미한다.(행동만을 제공 데이터는 감추기 캡슐화)

행동에 따라 객체를 분류하기 위해서는 내부적으로 관리해야 하는 데이터가 아니라. 객체가 외부에 제공해야 하는 행동을 먼저 생각해야 한다.(생각해보니까 TDD를 하면... 행동을 먼저 구현하게 되네)

이를 위해 객체가 외부에 제공해야 하는 책임을 먼저 결정하고 그 책임을 수행하는 데 적합한 데이터를 나중에 결정한 후 데이터를 책임을 수행하는 데 필요한 외부 인터페이스 뒤로 캡슐화 해야 한다.

### 타입의 계층

#### 일반화 특수화 관계

트럼프 <---- 트럼프인간 (일반화/특수화 관계)

트럼프는 트럼프 인간보다 더 일반적인 개념이다. 더 일반적이라는 개념은 더 포괄적이라는 의미를 내포한다.

일반화와 특수화는 동시에 일어난다. 트럼프 인간은 트럼프를 좀 더 특수하게 표현한 것이다. 특수하다는 것은 일반적인 개념보다 더 좁다는 것을 의미한다.

중요한 것은 객체지향에서 일반화/특수화 관계를 결정하는 것은 객체의 상태를 표현하는 데이터가 아니라 행동이라는 것이다.

일반적인 타입은 특수한 타입에 비해 더 적은 수의 행동을 가지며,<br>
특수한 타입은 일반적인 타입에 비해 더 많은 행동을 가진다.

#### 슈퍼타입과 서브타입

일반화/특수화 관계는 좀 더 일반적인 한 타입과 좀 더 특수한 한 타입 간의 관계다. 이 때 좀 더 일반적인타입을 슈퍼타입(Supertype) 이라고 하고 좀 더 특수한 타입을 서브타입(Subtype)이라고 한다.

일반적으로 서브타입은 슈퍼타입을 대체할 수 있어야 한다.(LSP)

#### 일반화는 추상화를 위한 도구다.

### 정적모델

#### 타입의 목적

타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의 복잡성을 극복하기가 너무 어렵기 때문이다.

객체의 상태는 계속 변하지만 식별성은 동일하게 유지된다.

타입은 시간에 따라 동적으로 변하는 객체의 상태를 시간과 무관한 정적인 모습으로 다룰수 있게 해준다.

#### 그래서 결국 타입은 추상화다.

타입은 추상화다. 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다. 결국 타입은 시간에 따른객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법인 것이다.

#### 동적 모델과 정적 모델

객체를 생각할때 두 가지 모델을 동시에 고려한다는 사실을 알 수 있다.

-   하나는 객체가 특정 시점에 구체적으로 어떤 상태를 가지느냐다. 이를 객체의 스냅샷(snapshot)이라고 한다.

스냅샷은 UML에서 객체 다이어그램(object diagram)이라고도 불린다.
스냅샷처럼 실제로 객체가 살아 움직이는 동안 상태가 어떻게 변하고 어떻게 행동하는지를 포착하는 것을 동적 모델(dynamic model)이라고 한다.

-   다른 하나는 객체가 가질 수 있는 모든 상태와 모든 행동을 시간에 독립적으로 표현하는 것이다. 일반적으로 이런 모델을 타입 모델(type diagram)이라고 한다

이모델은 동적으로 변하는 객체의 상태가 아니라 개체가 속한 타입의 정적인 모습을 표현하기 때문에 정적모델 (statis model)이라고도 한다.

객체지향을 구현하기 위해서는 동적 모델과 정적 모델을 적절히 혼용해야 한다.

#### 클래스

객체지향 프로그래밍 언어에서 정적인 모델은 클래스를 이용해 구현된다. 따라서 타입을 구현하는 가장 보편적인 방법은 클래스를 이용하는 것이다. (타입 != 클래스) 타입은 객체를 분류하기 위한 개념

클래스는 타입을 구현할 수 있는 여러 구현 메커니즘 중 하나이다.

클래스는 타입의 구현 외에도 코드를 재사용하는 용도로도 사용되기 때문에 클래스와 타입을 동일시 하는 것은 수많은 오해와 혼란을 불러일으킨다.

지금은 객체를 분류하는 기준은 타입이며, 타입을 나누는 기준은 객체가 수행하는 행동이라는 사실을 기억하자.

그리고 타입을 구현하는 기술 중 하나가 클래스다.

결국 중요한것은 동적으로 변하는 상태와 상태를 변경하는 행동이다.
