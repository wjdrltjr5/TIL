## 테스트 경계

테스트는 시스템의 일부이며 아키텍처에도 관여한다.

### 시스템 컴포넌트인 테스트

테스트는 태생적으로 의존성 규칙을 따른다. 의존성은 항상 테스트 대상이 되는 코드를 향한다. 테스트는 아키텍처에서 가장 바깥쪽 원으로 생각할 수 있다.

시스템 내부에 어떤것도 테스트 코드에 의존하지 않는다.

### 테스트를 고려한 설계

테스트가 시스템의 설계와 잘 통합되지 않으면 테스트는 깨지기 쉬워지고, 시스템은 뻣뻣해져서 변경하기가 어려워진다.

시스템에 강하게 결합된 테스트라면 시스템이 변경될 때 함께 변경되어야 한다. 시스템 컴포넌트에서 생긴 아주 사소한 변경도, 이와 결합된 수많은 테스트를 망가뜨릴 수 있다.(깨지기 쉬운 테스트 문제)

테스트를 고려해서 설계해야 한다. 소프트웨어 설계의 첫 번째 규칙은 언제나 같다 변동성이 있는 것에 의존하지 말라.

GUI는 변동성이 크다. GUI로 시스템을 조작하는 테스트 스위트는 분명 깨지기 쉽다. GUI를 사용하지 않고 테스트를 할 수 있게 설계해야 한다.

### 테스트API

이 목표를 달성하려면 테스트가 모든 업무 규칙을 검증하는 데 사용할 수 있도록 특화된 API를 만들면 된다.

API는 사용자 인터페이스가 사용하는 인터랙터와 언터페이스 어댑터 들의 상위 집합이 될것이다.

테스트 API는 테스트를 애플리케이션으로부터 분리할 목적으로 사용한다. 테스트 구조를 애플리케이션 구조로부터 결합을 분리하는게 목표다

#### 구조적 결합

구조적 결합은 테스트 결합중에서 가장 강하며, 가장 은밀하게 퍼져 나가는 유형이다.

사용 클래스나 메소드에 다 테스트 가 있을때 하나라도 변경되면 다수의 테스트가 변경되어야 한다 사용코드를 뻣뻣하게 만든다.

테스트 API의 역할은 애플리케이션의 구조를 테스트로부터 숨기는 데 있다. 이렇게 만들면 사용 코드를 리팩터링 하거나 진화시키더라도 테스트에는 전혀 영향을 주지 않는다.

테스트 API자체와 테스트 API중 위험한 부분의 구현부는 독립적으로 배포할 수 있는 컴포넌트로 분리해야 한다.

---

테스트는 시스템 외부에 있지 않다.
