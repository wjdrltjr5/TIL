## 아키텍처란?

소프트웨어 아키텍트는 코드와 동떨어져서는 안 된다.

소프트웨어 시스템의 아키텍처란 시스템을 구축했던 사람들이 만들어낸 시스템의 형태다.
아키텍처의 주된 목적은 시스템의 생명주기를 지원하는 것이다. 좋은 아키텍처는 시스템을 쉽게 이해하고 쉽게 개발하며 쉽게 유지보수하고 쉽게 배포하게 해준다.

시스템의 수명과 관련된 비용은 최소화하고 생산성은 최대화 하는데 있다.

### 개발

개발하기 힘든 시스템이라면 수명이길지도 않고 건강하지도 않을 것이다.
시스템 아키텍처는 개발팀이 시스템을 쉽게 개발할 수 있도록 뒷받침해야만 한다.

팀 구조가 다르다면 아키텍처 관련 결정에서도 차이가 난다. 일례로 팀이 작다면 모놀리식시스템을 개발할 수 있다.(이러한 팀이라면 아키텍처 관련 제약들이 오히려 방해가 된다고 여길 가능성이 높다.)

반면 대규모 팀이라면 시스템을 신뢰할 수 있고 안정된 인터페이스를 갖춘, 잘 설계된 컴포넌트 단위로 분리하지 않으면 개발이 진척되지 않는다.

### 배포

배포 비용이 높을수록 시스템의 유용성은 떨어진다. 따라서 소프트웨어 아키텍처는 시스템을 단 한번에 쉽게 배포할 수 있도록 만드는 데 그 목표를 두어야 한다.

MSA는 컴포넌트 경계가 매우 뚜렷해지고 인터페이스가 대체로 안정화 되므로 시스템을 매우 쉽게 개발할 수 있을지는 모르지만 배포가 어려워 진다. 서로 연결하고 장동순서를 결정하는 과정에서 오작동이 발생할 원천이 스며들 수 있기 때문이다.

### 운영

아키텍처가 운영에 미치는 영향은 개발, 배포, 유지보수에 미치는 영향보다는 덜 극적이다. 운영단계의 어려움은 보통 하드웨어를 더 추가함으로 해결할 수 있다.

시스템 아키텍처는 유스케이스, 기능, 시스템의 필수 행위를 일급엔티티로 격상 시키고, 이를 통해 시스템을 이해하기쉬워지며, 따라서 개발과 유지보수에 큰 도움이 된다.

### 유지보수

유지보수는 모든 측면에서 소프트웨어 시스템에서 비용이 가장 많이 든다.
새로운 기능은 끝도 없이 행진하듯 발생하고, 뒤따라서 발생하는 결함을 피할 수 없으며 결함을 수정하는데도 엄청난 인적 자원이 소모된다.

유지보수의 가장 큰 비용은 탐사와 이로 인한 위험부담에 있다. 탐사란 기능을 추가하거나 결함을 수정할 때, 소프트웨어를 파헤쳐서 어디를 고치는게 최선인지, 그리고 어떤 전략을 쓰는게 최적일지를 결정할 때 드는 비용이다.

주의를 기울여 신중하게 아키텍처를 만들면 이 비용을 크게 줄일 수 있다. 시스템을 컴포넌트로 분리하고, 안정된 인터페이스를 두어 서로 격리한다.

### 선택사항 열어 두기

소프트웨어는 두 종류의 가치 행위적 가치와 구조적 가치를 지닌다. 소프트웨어를 부드럽게 만드는 것은 구조적 가치이다.

소프트웨어를 부드럽게 유지하는 방법은 선택사항을 가능한 한 많이, 그리고 가능한 한 오랫동안 열어 두는 것이다. 열어 둬야 할 선택사항은 중요치 않은 세부사항이다.

소프트웨어는 두 가지 구성요소로 분해할 수 있다. 정책과 세부사항이다.

정책이란 시스템의 진정한 가치가 살아있는 곳이다.

세부사항이란 사람, 외부시스템, 프로그래머가 정책과 소통할 때 필요한 요소지만 정책이 가진 행위에는 조금도 영향을 미치지 않는다

세부사항에는

-   입출력 장치
-   데이터베이스
-   웹시스템
-   서버
-   프레임워크
-   통신 프로토콜 등이 있다.

아키텍트의 목표는 시스템에서 정책을 가장 핵심적인 요소로 식별하고, 동시에 세부사항은 정책에 무관하게 만들 수 있는 형태의 시스템을 구축하는 데 있다.

-   개발 초기에는 데이터베이스 시스템을 선택할 필요가 없다. 고수준의 정책은 어떤 종류의 데이터베이스를 사용하는지 신경 써서는 안된다.
-   개발 초기에는 웹 서버를 선택할 필요가 없다. 고수준의 정책은 자신이 웹을 통해 전달된다는 사실을 알아서는 안된다.
-   개발 초기에는 REST를 적용할 필요가 없다. 고수준의 정책은 뵈수 세계로의 인터페이스에 대해 독립적이어야 하기 떄문이다.
-   개발 초기에는 의존성 주입 프레임워크를 적용할 필요가 없다 고수준의 정책은 의존성을 해석하는 방식에 대해 신경 써서는 안된다.

흠...

세부사항에 몰두하지 않은 채 고수준의 정책을 만들 수 있다면 이러한 세부사항에 대한 결정을 오랫동안 미루거나 연기할 수 있다. 이러한 결정을 미룰 수 있다면 더많은 정보를 토대로 제대로 된 결정을 내릴 수 있다.

좋은 아키텍트는 결정되지 않은 사항의 수를 최대화한다.

### 장치 독립성

개방 폐쇄 원칙 스크린과 프린터예시
광고우편
물리적 주소 할당

---

좋은 아키텍트는 세부사항을 정책으로부터 신중하게 가려내고, 정책이 세부사항과 결합되지 않도록 엄격하게 분리한다. 이를 통해 정책은 세부사항에 관한 어떠한 지식도 갖지 모사게 되며, 어떤 경우에도 세부사항에 의존하지 않게 된다.
좋은 아키텍트는 세부사항에 대한 결정을 가능한 한 오랫동안 미룰 수 있는 방향으로 정책을 설계한다.
