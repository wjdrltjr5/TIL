# 비관적 vs 낙관적 동시성 제어

-   비관적 동시성 제어 : 사용자들이 같은 데이터를 동시에 수정할 것이라고 가정

    -   따라서 한 사용자가 데이터를 읽는 시점에 Lock을 걸고 조회또는 갱신처리가 완료될 때까지 이를 유지
    -   잘못사용하면 동시성을 저해 받게 된다.

-   낙관적 동시성 제어 : 사용자들이 같은 데이터를 동시에 수정하지 않을 것이라고 가정

    -   데이터를 읽을 때는 Lock을 설정하지 않는다.

    -   데이터를 수정하고자 하는 시점에 앞서 읽은 데이터가 다른 사용자에 의해 변경되었는지를 검사

## 비관적 동시성 제어

```sql
select 적립포인트
     , 방문횟수
     , 최근 방문일시
     , 구매실적
  from 고객
 where 고객번호 = :cust_num for update;


update 고객
   set 적립포인트 = :적립포인트
 where 고객번호 = :cust_num;
```

## 낙관적 동시성 제어

버전가지고 하는거
