# Dynamic SQL 사용기준

## Dynamic SQL 사용에 관한 기본 원칙

-   Static SQL을 지원하는 언어라면 Static SQL로 작성하는 것을 원칙으로 한다.

    -   PreCompile 과정을 거치므로 런타임 안정하기 때문

-   아래 경우에는 Dynamic SQL 사용

    -   PreCompile 과정에서 에러가 나는 구문을 사용할때 (Pro c에서 스칼라서브쿼리, 분석함수, ANSI조인등)

    -   상황과 조건에따라 생성될 수 있는 SQL 최대 개수가 많을때

    -   바인드 변수 사용원칙을 준수하되 아래 경우에는 예외적으로 인정
        -   배치의 경우 쿼리 파싱 소요시간이 크게 의미가 없고 수행빈도가 낮음
        -   OLTP 애플리케이션이라도 사용빈도가 매우낮아 하드파싱에 의한 라이브러리 캐시 부하를 유발할 가능성이 거의 없을떄
        -   조건컬 컬럼의 값 종류가 소수일때

## 기본 원칙이 잘 지켜지지 않는 첫 번째 이유, 선택적 검사 조건

대용량 테이블에 대한 조회 여건이 복잡하면 현업과 협의를 통해 필수 입력 항목을 수렴해서 반영

입력 값 범위를 가능한 짧게 제한하려는 노력을 반드시 해야한다. 설계단계에서 부터 성능을 고려한 업무 요건 도출이 필요한 이유가 여기 있다.

## 선택적 검색 조건에 사용할 수 있는 기법 성능 비교

-   or 조건을 사용하면 항상 Table Full Scan으로 처리되므로 인덱스 활용이 필요할때는 자제

-   LIKE 연산자를 사용하는 경우

-   NVL 함수를 사용하는 경우

-   DECODE 함수를 사용하는 경우
-   UNION ALL을 사용하는 경우
