# 인덱스 설계

## 54 인덱스 수직적 탐색

엑셀 시트에 입력한 모든 사원을 성별과 이름 순으로 정렬한 후 남자 홍길동을 찾으려면 필터 기능을 이용해 남자를 모두 찾고 그중 홍길동을 찾아야 한다.

반면 이름과 성별순으로 정렬하면 소수의 홍길동을 찾고 그중 남자를 찾으면 된다.

엑셀 시트처럼 평면적인 정렬 구조에서는 이름과 성별 순으로 정렬함녀 데이터를 빨리 찾는데 도움이 된다.

하지만 DBMS가 사용하는 B\*Tree 인덱스는 엑셀처럼 평면 구조가 아니다. 루트에서 브랜치를 거쳐 리프 블록까지 탐색하면서 남자 홍길동인 첫 번째 사원을 바로 찾아가는 다단계 구조다.

따라서 어느 컬럼을 앞에 두든 일량에는 차이가 없다.

## 55 결합 인덱스 구성을 위한 두 가지 선택 기준

Index Range Scan이 가능하려면 인덱스 선두 컬럼을 조건절에 반드시 사용해야 한다.

따라서 결합 인덱스를 구성할 때 첫 번째 기준은 조건절에 항상 사용하거나, 자주 사용하는 컬럼을 선정하는 것이다.

두 번째 기준은, 그렇게 선정한 컬럼 중 = 조건으로 자주 조회하는 컬럼을 앞쪽에 두어야 한다는 것

## 60 소트 연산 생략 가능하도록 인덱스 구성

I/O를 최소화하면서도 소트 연산을 생략하려면, 아래 공식에 따라 인덱스를 구성하면 된다.

-   = 연산자로 사용한 조건절 컬럼 선정
-   Order by절에 기술한 컬럼 추가
-   = 연산자가 아닌 조건절 컬럼은 데이터 분포를 고려해 추가 여부 결정
