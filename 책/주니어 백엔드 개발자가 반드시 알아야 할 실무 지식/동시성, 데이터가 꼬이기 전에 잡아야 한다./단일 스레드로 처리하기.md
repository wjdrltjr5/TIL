# 단일 스레드로 처리하기
동시성 문제가 발생하는 주된 이유는 여러 스레드가 동시에 동일 자원에 접근하기 떄문이다. 이를 방지하기 위해 잠금과 같은 수단을 사용한다. 하지만 잠금을 잘못 사용하면 교착상태 같은 상황이 발생할 수 있기 때문에 잠금을 다룰 때는 정신을 차리고 구현에 집중해야 한다.

동시성 문제를 피하는 방법 중 하나는 한 스레드만 자원에 접근하는 방식을 쓰면 된다. 여러 스레드가 동시에 접근하지 않고 한 스레드만 접근하므로 애초에 동시성 문제가 발생하지 않는다.

단일 스레드로 처리하면 동시성 문제에서 자유로울 수 있다. 반대로 구조는 복잡해지는 단점이 있다. 이점을 고려해서 단일 스레드 방식을 검토해야 한다.

```java
while(running){
    // 한 스레드만 큐에서 작업을 꺼내서 실행한다.
    Job job = jobQueue.poll(1, TimeUnit.SECONDS);
    if(job == null){
        continue;
    }

    // job 종류에 따라 상태 처리
    switch(job.getType()){
        case INC :
            // modifyState()는 한 스레드만 접근하므로 동시성 문제가 없다.
            obj.modifyState();
            break;
            // 다른 작업
    }
}
```
