# 재시도

외부 연동에 실패했을 떄 처리 방법 중 하나는 재시도를 하는 것이다. 네트워크 통신 과정에서 간헐적으로 연결에 실패하거나 일시적으로 응답이 느려지는 경우가 있다. 이럴 떄는 재시도를 통해 연동 실패를 성공으로 바꿀 수 있다.

## 재시도 가능 조건
항상 재시도를 할 수 있는 것은 아니다 연동 API를 다시 호출해도 되는 조건인지 확인해야 한다.

재시도를 해조 되는 조건은 다음 3가지로 정리할 수 있다.
- 단순 조회 기능
- 연결 타임아웃
    - 연결 타임아웃은 아직 연결되지 않아 연동 서비스가 요청을 처리하고 있지 않은 상태이므로, 순간적인 네트워크 문제였다면 재시도를 통해 연결에 성공할 가능성이 있다.
- 멱등성을 가진 변경 기능

같은 API라도 실패 원인에 따라 재시도 여부를 결정해야 한다. 검증 오류가 발생했다면 재시도를 해도 동일하게 실패할 가능성이 높다.

## 재시도 횟수와 간격
재시도할 때는 다음 2가지를 결정해야 한다.
- 재시도 횟수 : 대부분의 경우 1~2번 정도의 재시도가 적당하다.
- 재시도 간격 : 여러 차례 재시도할때는 재시도 간격을 점진적으로 늘리기도 한다.

## 재시도 폭풍 안티패턴
재시도를 통해 성공 가능성을 높일 수 있지만 반대로 연동 서비스에는 더 큰 부하를 줄 수 있다.

따라서 재시도를 검토할 때는 연동 서비스의 성능 상황도 함께 고려해야 한다.



