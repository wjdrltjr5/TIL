# 방화벽으로 필요한 트래픽만 허용하기
서버가 외부에 노출되기 시작하면 포트 스캔부터 다양한 공격이 들어온다. 필요한 만큼만 네트워크 접근을 허용하고 나머지는 차단해야 한다.

가장 기본적인 네트워크 접속 차단은 방화벽을 통해 이루어진다. 방화벽은 물리적인 장비로 존재하기도 하고 가장 방화벽으로 존재하기도 한다.

방화벽은 네트워크 통신을 두 방향으로 제어한다.
- 인바운드 트래픽 : 외부에서 내부로 유입되는 것
- 아웃바운드 트래픽 : 내부에서 외부로 유출되는 것

기본적으로 인바운드는 필수 트래픽만 허용하고 나머지는 차단할 것을 권한다. 접속을 허용할 클라리언트 IP도 가능한 최소 범위로 지정한다.

예시
- 서비스 API : 외부의 모든 IP에서 서버A IP에 443 포트로 접근 가능
- 관리자 API : 사내 IP만 서버B IP의 443 포트로 접근 가능

아웃바운드 트래픽 역시 가능하면 필수만 허용하고 나머지는 차단한다. 아웃바운드를 모두 허용하면 서버가 해킹당했을때 해커의 중간 경유지로 악용될 수 있기 때문

방화벽은 단순히 트래픽을 제어하는 것 외에도 DDos나 포트 스캔 같은 네트워크 공격을 차단하는 기능도 제공한다.

웹 방화벽을 사용하면 HTTP/HTTPS 수준에서 발생하는 공격도 방어할 수 있다. 웹 방화벽은 SQL 인젝션, XSS 같은 웹 기반 위협을 감지하고 차단한다.

또란 개별 서버 자체도 방화벽기능을 제공한다. 우분투 리눅스, 로키 리눅스, 우니도우 서버등 서버 OS도 방화벽 기능을 통해 트래픽을 제어할 수 있다.

방화벽이나 웹 방화벽을 사용하고 있지 않다면, 최소한 서버 수준에서 방화벽을 설정해 시스템을 보호해야 한다.