# 프로세스 확인하기
클라리언트가 서버에 연결이 제대로 안 되면 서버 프로세스가 정상 동작 중인지 확인해야 한다. 서버 프로그램을 재시작하는데 이전 프로세스가 종료되지 않고 남아 있다거나, 시작하는 과정에서 오류가 발생해서 프로세스 구동에 실패할 떄가 발생할 수 있기 때문이다.

프로세스 종료가 제대로 되지 않을 경우 프로세스를 강제로 종료해야 한다. 프로세스를 종료하려면 종료시킬 프로세스의 ID가 필요하다.

프로세스 ID를 확인하기 위해서 주로 ps aux나 ps -eaf 명령어를 주로 사용한다. 이 명령어를 사용하면 실행중인 프로세스의 소유자, 프로세스 ID, 명령행 인자 등의 정보를 확인할 수 있다.

프로세스가 사용하는 CPU나 메모리 사용량을 실시간으로 확인할 때에는 top나 top을 개선한 htop과 같은 프로그램을 사용한다

이들 도구를 사용하면 CPU 사용량이 높은 프로세스나 메모리 사용량이 높은 프로세스를 쉽게 확인할 수 있어 문제를 일으키는 프로세스를 찾을 때 도움이 된다.

메모리나 CPU 사용량은 ps 명령어로도 확인할 수 있다. 예로 다음 명령어를 사용하면 프로세스가 점유하는 메모리 사용량이 높은 프로세스 상위 5개를 확인할 수 있다.
> ps aux --sort -rss | head -n 6

## 프로세스 종료
서버의 중지 명령어를 실행했는데 프로세스가 죽지 않고 계속 실행되는 상태로 남아 있거나, 재시작 과정에서 이전 프로세스가 제대로 종료되지 않을 때가 있다. 이때는 프로세스를 직접 종료해야 한다.

프로세스를 종료할때는 kill 명령어를 사용한다. kill 명령어는 명령행 인자로 프로세스 ID를 사용한다.

> kill 옵션 PID

옵션에는 보통 다음 2가지를 사용한다.
- -15 또는 -s SIGTERM 또는 -TERM
    - -15는 기본값으로 프로세스에 TERM신호를 보낸다. 신호를 받은 프로세스는 종료에 필요한 작업을 수행한다. (임시로 생성한 파일을 삭제하거나 스프링 빈의 제거 처리)
- -9 또는 -s SIGKILL 또는 -KILL
    - -9는 프로세스를 강제로 종료한다. 이 옵션은 프로그램이 종료할 때 수행하는 정리 작업을 할 수 없기 때문에 주의해서 사용해야 한다. 
    - 먼저 -15옵션으로 여러 차례 종료 시도를 하고 안된다면 -9옵션을 사용하는 것이 좋다.

    

