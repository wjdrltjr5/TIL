# CAP정리
분산 시스템에서 주로 언급되는 이론으로 CAP정리가 있다. CAP 정리는 다음 세 조건을 모두 만족하는 분산 시스템은 존재하지 않는다는 것을 증명한 정리이다.

- 일관성(Consistency) : 모든 노드가 같은 순간에 같은 데이터를 볼 수 있다. 한 노드의 데이터가 변경되면 모든 노드의 데이터도 동일한 값으로 바뀐다.
- 가용성(Availability) : 모든 요청이 성공 또는 실패 결과를 반환할 수 있다.
- 분할내성(Partition tolerance) : 네트워크 장애가 발생해도 시스템이 계속 동작할 수 있다.

CAP 정리에 따르면 다음의 세 종류로 DB를 나눌 수 있다.
- CA : 모든 노드에서 일관성과 가용성을 제공한다. 즉 모든 노드에서 변경된 최종값을 사용하고 일부 노드가 다운되어도 나머지 노드가 정상 동작한다 (RDBMS가 여기에 해당)

- AP : 가용성을 우선하며 분할 내성을 제공한다. 노드 간에 네트워크 분할이 발생하면 일관성을 포기하고 기능을 계속한다.(가용성) Cassandra가 여기에 해당

- CP : 일관성을 우선하며 분할 내성을 제공한다. 네트워크 분할이 발생하면 일관성을 보장할 수 없으므로 분할이 해결될 때까지(일부 또는 전체) 기능을 차단한다. MongoDB가 CP에 해당한다.

NoSQL은 분산 시스템을 기반으로 하고 있기 때문에 분할 내성을 기본으로 한다. 따라서 NoSQL은 가용성(AP)이나 일관성(CP)을 우선하는 설계를 선택한다.

그러니 서비스의 품질 속성에서 가용성과 일관성 중 무엇에 중점을 두느냐에 따라 선택할 수 있는 NoSQL도 달라진다.
