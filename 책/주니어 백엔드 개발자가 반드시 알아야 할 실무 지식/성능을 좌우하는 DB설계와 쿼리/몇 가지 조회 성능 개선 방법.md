# 몇 가지 조회 성능 개선 방법
## 미리 집계하기
count나 sum같은 집계 쿼리를 조회 시점에 실행하면서 발생하는 성능 문제를 제거하는 방법은 간단하다. 집게 데이터를 미리 계산해서 별도 컬럼에 저장하면 된다.

## 페이지 기준 목록 조회 대신 ID 기준 목록 조회 방식 사용하기
지정한 오프셋으로 이동하기 위해 데이터를 세는 시간을 줄이는 방법은 특정 ID를 기준으로 조회하는 것이다.

## 조회 범위를 시간 기준으로 제한하기
조회 성능을 개선하는 방법 중 하나는 조회 범위를 시간 기준으로 제한하는 것이다.

## 전체 개수 세지 않기
목록을 표시하는 기능은 저체 개수를 함께 표시하는 경우가 많다. 데이터가 적을 떄는 count 쿼리를 실행해도 큰 문제가 없다. 문제는 데이터가 급격히 증가하기 시작할 때 발생한다.

## 오래된 데이터 삭제 및 분리보관하기
데이터 개수가 늘어나면 늘어날수록 쿼리 실행 시간은 증가한다. 즉 데이터 개수가 증가하지 않으면 실행 시간을 일정 수준으로 유지할 수 있다.

데이터 폭의 증가를 낮추는 방법 중 하나는 과거 데이터를 삭제하는것이다. 과거 데이터를 삭제하면 데이터 개수를 일정하게 유지할 수 있어, 성능 또한 일정 수준으로 유지된다.

## DB 장비 확장하기
빠르게 성능을 개선할 방법을 찾지 못했거나, 개선에 시간이 필요한 경우라면 일단 DB 장비를 수직으로 확장해 서비스 가능한 상태로 유지하고 개선할 시간을 벌어야 한다.

클라우드를 사용하면 DB장비의 성능을 짧은 시간 안에 높일 수 있다. 일단 DB가 버틸 수 있는 상태가 되면 그 다음엔 효과적인 개선 방안을 찾아 적용하면 된다.

수평확장도 고려해볼 수 있다. 조회 트래픽 비중이 높은 경우 DB를 이중화해 처리량을 효과적으로 증가시킬 수 있다.

## 별도 캐시 서버 구성하기
서비스가 잘되어 트래픽이 급격하게 증가하면, DB만으로 모든 트래픽을 처리하기 어려워질 수있다. 

다양한 성능 개선 방법을 적용해도 한계가 있고, 비용 문제로 인해 DB장비를 더 이상 확장하지 못하는 상황도 발생할 수 있다.

실제로 대규모 트래픽이 발생하는 많은 서비스는 캐시 서버를 기본적으로 사용하고 있다. 꼭 대규모 트래픽이 아니더라도 캐시 서버를 잘 활용하면 DB 확장 대비 적은 비용으로 더 많은 트래픽을 처리할 수 있다.

