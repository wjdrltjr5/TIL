# 프로토콜과 TCP, UDP, QUIC
네트워크 상에서 두 노드가 데이터를 주고받기 위해 정의한 규칙을 프로토콜 이라고 한다. 네트워크는 여러 계층으로 구성되며 각 계층마다 사용하는 프로토콜이 존재한다. 예를 들어 TCP/IP 모델에는 4개 계층이 있다.

개발자는 주로 전송계층(TCP, UDP)과 애플리케이션 계층(HTTP, FTP, SMTP)의 프로토콜을 사용한다. 

전송 계층 프로토콜에는 TCP, UDP가 있다.
## TCP
- TCP : 연결 기반 프로토콜 두 노드 간에 먼저 연결을 맺은 뒤에 데이터를 주고 받는다. TCP에서 두 노드가 연결을 맺기 위한 과정을 3-WayHandshake 라고 부른다.

TCP의 장점은 신뢰성에 있다. 패킷 순서를 보장하고 패킷이 유실될 경우 재전송하는 기능을 제공하고 있어 안정적으로 데이터를 전송할 수 있다. 이런 이유로 애플리케이션 계층의 HTTP, SMTP와 같은 프로토콜이 TCP를 기반으로 동작한다.

TCP가 전송을 보장하기 위해 사용하는 시퀀스 번호, 확인 응답, 재전송 등이 추가되면서 전송 속도는 UDP보다 느리다.

일부 패킷이 유실되면 해당 패킷이 도착할때까지 이후 패킷을 제대로 처리하지 못하는 HOL(Head of Line Blocking)문제가 있는데 전체적인 전송 속도를 느리게 만든다.

## UDP
- UDP : 연결 과정 없이 바로 데이터를 전송한다.

UDP를 사용하면 데이터가 전상적으로 전송됐는지 알 수 없고 순서를 보장하지도 않는다. UDP를 사용하는 애플리케이션은 데이터 유실과 같은 상황이 발생할 수 있다고 가정하고 개발해야 한다.

UDP는 응답 확인이나 패킷 정렬과 같은 과정을 거치지 않기 때문에 전송 속도는 TCP대비 빠르다. 이런 이유로 UDP는 속도가 중요하거나 일부 데이터가 유실되더라도 문제되지 않는 통신에 주로 사용된다. (DNS, VoIP, 게임)

## QUIC
TCP는 신뢰성이 있지만 느리다. UDP는 빠르지만 신뢰성이 없다. 이둘을 합쳐 빠르면서도 신뢰성이 있는 프로토콜이 QUIC이다.

QUIC는 UDP를 기반으로 한다. TCP의 연결 관리 기능을 QUIC 프로토콜 수준에서 제공한다. QUIC은 데이터에 연결ID(Connection ID)를 포함시키는데 이 연결 ID를 이용해서 두 노드간의 연결을 유지한다.

또한 TCP의 혼잡 제어나 패킷 유실 복구와 같은 기능을 QUIC프로토콜 수준에서 제어한다. QUIC는 TLS(Transport Layer Security)를 통합했다.

QUIC패킷은 기본적으로 암호화되어 전송된다. 또한 TCP 기준의 HTTPS는 TCP 연결을 위해 3-Way Handshake와 TLS연결을 위한 TLS Handshake를 진행해서 여러 차례 통신을 한 뒤에 연결이 수립되는데, QUIC은 TLS를 통합함으로써 이 과정을 단축했다.

QUIC은 멀티플렉싱을 지원한다. QUIC은 한 연결에서 여러 스트림을 동시에 처리할 수 있다. 여러 스트림을 동시에 처리하므로 1개 스트림에서 HOL블로킹이 발생해도 다른 스트림에는 영향을 주지 않는다.

HTTP/2도 멀티 플렉싱을 지원하지만 TCP 자체에서 발생하는 HOL블로킹 문제를 피할수는 없다.

크롬, 에지, 사파리등 주요 브라우저는 이미 HTTP/3(QUIC기반)을 지원하고 있다. (브라우저 개발자 도구에서 프로토콜에 h3으로 표시됨)