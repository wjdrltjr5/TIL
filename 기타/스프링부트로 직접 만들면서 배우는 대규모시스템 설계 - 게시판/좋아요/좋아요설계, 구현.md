# 좋아요 설계

-   게시글 좋아요
    -   각 사용자는 각 게시글의 1회 좋아요
    -   취소도 가능하다.
    -   이러한 좋아요는 각 게시글마다 1회만 수행된다.
    -   Mysql의 유니크 인덱스를 이용하면 이를 쉽게 구현할 수 있다.
        -   게시글ID + 사용자ID로 유니크 인덱스를 만들기
-   좋아요 수

## 유니크 인덱스란?

*유니크 인덱스(Unique Index)*는 데이터베이스에서 특정 컬럼(또는 컬럼들의 조합)에 _중복된 값이 저장되지 않도록 강제하는 인덱스_

즉, 해당 컬럼에 저장된 값들은 모두 고유해야 합니다.

### 주요 특징

-   **중복 방지**: 한 게시글에 대해 사용자가 여러 번 좋아요를 누르지 않도록, `게시글ID + 사용자ID` 조합에 유니크 인덱스를 적용하면 해당 조합이 데이터베이스에 단 한 번만 저장되도록 보장할 수 있습니다.
-   **데이터 무결성 보장**: 애플리케이션 레벨에서 로직을 구현하지 않아도 데이터베이스 레벨에서 중복 입력을 방지하여 무결성을 유지할 수 있습니다.
-   **성능 이점**: 인덱스를 사용하면 검색 및 조회 속도가 향상될 수 있으나, 인서트 및 업데이트 시에는 인덱스 갱신 비용이 추가될 수 있습니다.

### 사용 예시

예를 들어, `posts_likes` 테이블에 `post_id`와 `user_id` 컬럼이 있다고 가정하면, 아래와 같이 유니크 인덱스를 생성할 수 있습니다:

```sql
CREATE TABLE posts_likes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT NOT NULL,
    user_id INT NOT NULL,
    liked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY unique_post_user (post_id, user_id)
);
```
