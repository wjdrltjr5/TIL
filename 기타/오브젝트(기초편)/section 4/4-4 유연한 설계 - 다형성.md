# 유연한 설계 - 다형성

책임을 할당할 때는 항상 응집도와 결합도 측면에서 설계의 품질을 평가해 봐야 한다.

`현존 할인 정책 객체 안에 있는 비율 할인 정책과, 금액 할인 정책을 계산하는 로직은 할인 정책의 한 종류라는 공통점만 있지 계산하는데 필요한 로직과 데이터는 모두 다르다.`

따라서 서로 상관이 없는 두 로직을 함께 포함하고 있기 떄문에 응집도가 낮다. 새로운 정책이 추가될 경우 할인 정책 객체 내부 아무런 상관이 없는 코드를 수정해야함

무비 코드에서도 새로운 조건문을 추가해야한다.

## Polymorphism 다형성 패턴

-   문제

    -   타입을 기반으로 유사하지만 서로 다르게 행동할 때 (책임은 같지만 구체적인 방식과 데이터가 다름)
    -   조건문을 사용하지 않고 변하는 행동을 처리하고 싶을 때

-   해결방법

    -   다형적인 메시지를 이용해서 행동이 변하는 타입들에게 각 행동을 다루기 위한 책임을 할당하라.
    -   예시 (변하는 행동을 각각의 타입으로 분리)

        -   금액으로 할인하는데 필요한 정보를 알고 있는 금액 할인 정책에 할당.
        -   비율로 할인하는데 필요한 정보를 알고있는 비율 할인 정책에 할당.

    -   조건문 제거를 위해 추상화
