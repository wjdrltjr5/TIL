# 결합도 낮추기 - 변경 보호

## Polymorphism 다형성 패턴

-   문제

    -   타입을 기반으로 유사하지만 서로 다르게 행동할 때 (책임은 같지만 구체적인 방식과 데이터가 다름)
    -   조건문을 사용하지 않고 변하는 행동을 처리하고 싶을 때

-   해결방법

    -   `다형적인 메시지`를 이용해서 행동이 변하는 타입들에게 각 행동을 다루기 위한 책임을 할당하라.
    -   예시 (변하는 행동을 각각의 타입으로 분리)

        -   금액으로 할인하는데 필요한 정보를 알고 있는 금액 할인 정책에 할당.
        -   비율로 할인하는데 필요한 정보를 알고있는 비율 할인 정책에 할당.

    -   조건문 제거를 위해 추상화 (두 객체는 영화의 입장에서는 동일한 책임을 수행)

메시지 : 객체들이 서로 협력하기 위한 의사소통 수단(메소드 호출)

## Protected Variations 변경 보호

-   문제
    -   요소들의 변화나 불안정한 요소가 다른 요소에 해로운 영향을 미치지 않도록 할 수 있을까?
-   해결방법
    -   변화가 예상되거나 불안정한 지점을 식별하고, 그 주위에 안정적인 인터페이스 또는 추상화를 형성하도록 책임을 할당하라.
    -   조건문 제거를 위해 추상화 (두 객체는 영화의 입장에서는 동일한 책임을 수행)

타입 변경으로 인한 부수효과를 방지

### `다형성 : 메시지가 동일하더라도 수신한 객체의 타입에 따라 실제로 수행하는 행동이 달라지는 능력`

## 책임 주도 설계 구성 요소

역할, 책임, 협력

-   할인 정책은 할인 금액을 계산하기 위해 할인 여부를 판단해야 함
-   할인 정책이 직접 할인 여부를 판단하면 응집도가 낮아지기 때문에 외부의 객체에 도움을 요청
-   도메인 안에는 이미 할인 여부를 판단하기에 적절한 도메인 개념이 존재
-   할인 조건역시 순서 조건과 기간조건 타입에 따라 행동이 변함
-   다형성 패턴과 보호 변경 패턴 적용
