# 쓰기 시 복사
fork() 시스템 콜을 통해 프로세스를 생성할때는 페이진 공유와 비슷한 기법으로 첫 요구 페이징조차 생략하는 것이 가능하다.

이 기법을 통해 프로세스 생성 시간이 더 줄 수 있음은 물론, 새로 생성된 프로세스에 새롭게 할당 되어야 하는 페이지의 수도 최소화할 수 있다.

fork()는 부모 프로세스와 똑같은 자식 프로세스를 만들어 주는 것. 과거에는 fork()를 하면 부모 프로세스의 페이지들을 실제로 자식 프로세스에 복사해줌으로써 자식 프로세스의 주소 공간을 구성해서 대부분의 자식 프로세스는 만들어지자마자 exec()시스템 콜을 했다.

그러면 부모로부터 복사해온 페이지들은 다 쓸모없는 것들이 되고 만다. 그래서 부모의 페이지들을 다 복사해오는 대신 쓰기 시 복사 방식을 사용할 수 있다.

위 방식에서는 자식 프로세스가 시작할 때 부모의 페이지를 당분간 함께 사용하도록 한다.  이때 공유되는 페이지를 쓰기 시 복사 페이지라고 표시한다. 둘 중 한 프로세스가 공유 중인 페이지에 쓸 떄 그 페이지의 복사본이 만들어진다는 으비

자식 프로세스가 스택을 담고 있는, 쓰기 시 복사로 표시된 페이지에 쓴다고 했을 떄 운영체제는 가용 프레임 리스트에서 프레임을 얻고 이 페이지의 복사본들 만들어서 자식 프로세스의 주소 공간에 사상시킨다.

따라서 자식은 그 개인용으로 따로 만든 페이지에 수정을 가하게 되는 것이다. 이렇게 하면 프로세스가 수정을 하는 페이지들에 대해서만 복사본이 생기게 된다. 수정되지 않는 페이지들은 자식과 부모 간에 계속 공유될 수 있는 것이다.

또한 수정될 수 있는 페지이만이 쓰기 시 복사로 표시할 필요가 있음을 주의 수정될 수 없는 페이지는 자식과 부모 간에 그대로 공유될 수 있다. 쓰기 시 복사는 여러 운영체제에서 사용되고 있다.

