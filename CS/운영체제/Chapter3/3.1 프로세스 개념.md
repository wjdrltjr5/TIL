# 프로세스 개념

초창기 컴퓨터는 `작업`을 실행하는 일괄처리 시스템이었고 `사용자 프로그램`또는 `태스크`를 실행하는 시분할 시스템이 뒤를 이었다

단일 사용자 시스템에서도 사용자는 워드 프로세서, 웹 브라우저 및 전자 메일 패키지와 같은 여러 프로그램을 한 번에 실행할 수 있다.

다중 태스킹을 지원하지 않는 임베디드 장치에서와 같이 컴퓨터가 한 번에 하나의 프로그램만 실행할 수 있더라고 운영체제는 메모리 관리와 같이 자체 프로그램된 내부 활동을 지원해야 할 수도 있다.

이러한 모든 활동을 `프로세스(작업)`라고 부를 수 있다.

## 3.1.1 프로세스

비공식적으로 프로세스란 실행중인 프로그램이다. 프로세스의 현재 활동 상태는 `프로그램 카운터`값과 프로세서 레지스터의 내용으로 나타낸다

프로세스의 메모리 배치

-   `텍스트 섹션 : 실행코드`
    -   크기가 고정되어 있음 프로그램 실행동안 크기가 변하지 않는다.
-   `데이터 섹션 : 전역변수`
    -   크기가 고정되어 있음 프로그램 실행동안 크기가 변하지 않는다.
-   `힙 섹션 : 프로그램 실행 중에 동적으로 할당되는 메모리`
    -   프로그램 실행 중 동적으로 크기가 변함
-   `스택 섹션 : 함수를 호출할 때 임시 데이터 저장장소(함수 매개변수, 복귀 주소 및 지역변수)`
    -   프로그램 실행 중 동적으로 크기가 변함
    -   함수가 호출될 떄마다 매개변수, 지역변수 및 복귀주소를 포함하는 `활성화 레코드`가 스택에 푸쉬된다. (스택프레임인가봄)

스택 힙 섹션이 서로의 방향으로 커지더라도 운영체제는 서로 겹치지 않도록 해야 한다.

프로그램 그 자체는 프로세스가 아님을 강조한다. 프로그램은 명령어 리스트를 내용으로 가진 디스크에 저장된 파일(`실행파일`)과 같은 수동적인 존재이다.

대조적으로 프로세스는 다음에 실행할 명령어를 지정하는 프로그램 카운터와 관련 자원의 집합을 가진 능동적인 존재이다.

실행 파일이 메모리에 적재될 때 프로그램은 프로세스가 된다.

실행 파일을 메모리에 적재하는 일반적인 두 가지 방식은 실행 파일은 나타내는 아이콘을 더블클릭 , 명령어 라인상에서 파일이름을 입력하는 방식

두 프로세스들이 동일한 프로그램이 연관될 수 있지만 이들은 두 개의 별도의 실행 순소로 간주한다.

프로세스 자체가 다른 개체를 위한 실행 환경으로 동작할 수 있다. `JVM`같은게 예시 JVM을 보통의 프로세스처럼 실행시키고 자바 프로그램을 가상 기계 안에서 실행

## 3.1.2 프로세스 상태

프로세스는 실행되면서 그 `상태`가 변한다. 프로세스의 상태는 부분적으로 그 프로세스의 현재의 활동에 따라서 정의된다.

-   새로운 (new) : 프로세스가 생성 중이다.
-   실행(running) : 명령어들이 실행되고 있다.
-   대기(waiting) : 프로세스가 어떤 이벤트(입출력 완료 또는 신호의 수신 같은)가 일어나기를 기다린다.
-   준비(ready) : 프로세스가 처리기에 할당되기를 기다린다.
-   종료(terminated) : 프로세스의 실행이 종료되었다.

한 처리기 코어에서는 오직 하나의 프로세스만이 실행된다는 것을 인식하는 것이 중요하다.

## 3.1.3 프로세스 제어 블록

각 프로세스는 운영체제에서 `프로세스 제어 블록 `(태스크 제어 블록이라고도 불린다.)에 의해 표현된다.

PCB는 특정 프로세스와 연관된 여러 정보를 수록하며, 다음과 같은 것들을 포함한다.

-   프로세스 상태 : 상태는 새로운(new), 준비(ready), 실행(running), 대기(waiting) 또는 정지(halted) 상태 등이다.

-   프로그램 카운터 : 프로그램 카운터는 이 프로세스가 다음에 실행할 명령어의 주소를 가리킨다.

-   CPU 레지스터들 : CPU 레지스터는 컴퓨터의 구조에 따라 다양한 수와 유형을 가진다.

    -   레지스터에는 누산기, 인덱스 레지스터, 스택 레지스터, 범용 레지스터들과 상태 코드 정보가 포함된다.
    -   프로그램 카운터와 함께 이 상태정보는, 나중에 프로세스가 다시 스케줄 될 때 계속 올바르게 실행되도록 하기 위해서 인터럽트 발생 시 저장되어야 한다.

-   CPU-스케줄링 정보 : 프로세스 우선순위, 스케줄 큐에 대한 포인터와 다른 스케줄 매개변수를 포함한다.

-   메모리 관리 정보 : 운영체제에 의해 사용되는 메모리 시스템에 따라 기준 레지스터와 한계 레지스터의 값, 운영체제가 사용하는 메모리 시스템에 따라 페이지 테이블 또는 세그먼트 테이블 등과 같은 정보를 포함한다.

-   회계(accounting) 정보 : 이 정보는 CPU 사용시간과 경과된 실시간, 시간 제한, 계정 번호, 잡 또는 프로세스 번호 등을 포함한다.

-   입출력 상태 정보 : 이 정보는 이 프로세스에 할당된 입출력 장치들과 열린 파일의 목록 등을 포함한다.

## 3.1.4 스레드

지금까지 논의한 모델은 프로세스가 단일의 `스레드`를 실행하는 프로그램

대부분의 현대 운영체제는 프로세스 개념을 확장하여 한 프로세스가 다수의 실행 스레드를 가질 수 있도록 허용한다. 프로세스가 한 번에 하나 이상의 일을 수행할 수 있도록 허용한다.

여러 스레드가 병렬로 실행될 수 있다. `스레드를 지원하는 시스템에서는 PCB는 각 스레드에 관한 정보를 포함하도록 확장된다.`
