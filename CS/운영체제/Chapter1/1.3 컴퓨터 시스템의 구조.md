# 컴퓨터 시스템 구조

## 1.3.1 단일 처리기 시스템

1. 과거 시스템 구조

-   대부분의 컴퓨터는 **하나의 범용 CPU**와 **단일 코어**를 가진 **단일 프로세서 시스템**이었다.
-   CPU의 **코어**는:
    -   명령을 실행하고
    -   레지스터를 이용해 데이터를 로컬에 저장한다.
-   범용 CPU는 **다양한 명령어**를 실행하며 **사용자 프로세스도 실행**할 수 있다.

2.  전용 처리기 (특수 목적 프로세서)

-   **디스크, 키보드, 그래픽 컨트롤러 등 장치에 포함된 프로세서**
-   특징:
    -   **제한된 명령어 집합**만 실행
    -   **사용자 프로세스는 실행하지 않음**
    -   일반적으로 **운영체제에 의해 직접 관리되거나** 또는 **독립적으로 동작**

3. 전용 처리기의 종류

운영체제가 관리하는 전용 처리기

-   운영체제가 다음과 같은 역할을 수행:
    -   작업 할당
    -   상태 감시
-   예: 디스크 컨트롤러
    -   자체 디스크 큐와 디스크 스케줄링 알고리즘을 가짐
    -   CPU의 오버헤드를 줄이는 데 도움

독립적으로 동작하는 전용 처리기

-   운영체제가 직접 제어할 수 없는 저수준 하드웨어 구성요소
-   예: 키보드 내부의 마이크로프로세서 (키 입력 → 스캔코드 변환)

4. 처리기 구성에 대한 결론

-   전용 마이크로프로세서를 사용하더라도 **단일 프로세서 시스템이 다중 프로세서 시스템으로 바뀌는 것은 아님**
-   **단일 프로세서 시스템**이란:
    -   하나의 범용 CPU만 존재하고
    -   사용자 프로세스를 실행할 수 있는 코어가 하나인 시스템
-   **현대 시스템**은 대부분 다중 코어나 다중 CPU를 가지는 **다중 프로세서 시스템**이다.

### 1.3.2 다중 처리기 시스템

1. 다중 처리기 시스템이란?

-   두 개 이상의 **단일 코어 CPU(프로세서)**를 포함하는 시스템
-   **버스, 메모리, 장치** 등을 여러 CPU가 공유
-   현대 컴퓨터 시스템 대부분이 다중 처리기 구조를 사용함

2. 다중 처리기의 장점

-   **처리량 증가**: 병렬로 더 많은 작업 수행 가능
-   **프로세스 병렬 실행**: N개의 CPU → N개의 프로세스 동시 실행 가능
-   **전력 효율성**: 다중 코어는 단일 코어 여러 개보다 전력 소모가 적음
-   **칩 내 통신 속도 향상** → 다중 코어가 더 효율적

3.  성능의 한계 및 오버헤드

-   CPU 수가 늘어날수록 오버헤드, 자원 경합 발생
-   하나의 CPU는 유휴 상태, 다른 하나는 과부하 → 비효율
-   성능 향상은 CPU 수에 비례하지 않음

4. 다중 처리기 시스템의 종류

SMP (Symmetric Multiprocessing)

-   모든 CPU가 동일한 역할 수행
-   운영체제 기능과 사용자 프로세스 모두 실행 가능
-   CPU는 **공유 메모리**와 **시스템 버스**를 통해 연결됨

NUMA (Non-Uniform Memory Access)

-   CPU마다 **자체 로컬 메모리**를 가짐
-   로컬 메모리 접근은 빠름, 다른 CPU의 메모리 접근은 느림

-   장점 : 확장성 좋고, 로컬 메모리 접근 속도 빠름
-   단점 : 원격 메모리 접근 시 지연 발생

5. 다중 코어 시스템

-   하나의 CPU 칩에 여러 개의 코어 포함
-   **칩 내 통신**이 칩 간 통신보다 빠름
-   성능 향상, 전력 소모 감소, 효율 개선

6. 블레이드 서버

-   여러 개의 **독립적인 처리기 보드**를 하나의 섀시에 장착
-   각 보드는 **독립적으로 부팅 및 OS 실행 가능**
-   일부 블레이드는 자체적으로 다중 처리기 구조 사용

7. 컴퓨터 시스템 구성요소 정의

| 구성 요소              | 설명                                      |
| ---------------------- | ----------------------------------------- |
| **CPU**                | 명령어를 실행하는 하드웨어                |
| **프로세서**           | 하나 이상의 CPU를 포함한 물리적 칩        |
| **코어**               | 계산을 수행하는 CPU 내부 단위             |
| **다중 코어**          | 하나의 CPU에 여러 코어                    |
| **다중 처리기 시스템** | 여러 개의 CPU 또는 코어를 포함하는 시스템 |

### 1.3.3 클러스터형 시스템

클러스터형 시스템

-   여러 CPU를 가진 시스템의 또다른 유형
-   둘 이상의 독자적 시스템 또는 노드들을 연결하여 구성
-   각 노드는 통상 다중 코어 시스템
    -   이러한 시스템은 약결합 이라고 간주됨
-   높은 가용성을 제공하기 위해 사용
-   하나의 컴퓨터 시스템이 고장나더라도 서비스 지속 제공 가능
-   각 노드는 하나 이상의 다른 노드를 감시하고 노드가 고장나면 해당 노드에서 실행중이던 응용프로그램을 다시 시작한다.

높은 가용성은 안정성을 향상해 많은 응용 프로그램에서 중요하다. 남아 있는 하드웨어 수준에 비례하여 서비스를 계속 제공하는 기능을 `우아한 성능 저하(graceful degradation)`라고 한다.

결함허용 시스템 : 일부 시스템이 정상적인 성능 저하를 넘어 단일 구성요소에 오류가 발생하여도 계속 작동할 수 있는 시스템

결함허용에는 장애를 감지, 진단 및 가능한 경우 수정할 수 있는 기법이 필요

클러스터링은 비대칭적 또는 대칭적으로 구성될 수 있다.

-   비대칭형 클러스터링
    -   다른 컴퓨터들이 응용프로그램을 실행하는동안 한 컴퓨터는 `긴급 대기 모드`상태를 유지한다.
    -   이 컴퓨터는 다른 활성 서버들을 감시하는 작업만 수행
    -   다른 컴퓨터 고장시 긴급대기 모드의 호스트가 활성서버가 된다.
-   대칭형 클러스터링

    -   둘 이상의 호스트들이 응용프로그램을 실행하고 서로를 감시
    -   가용 하드웨어를 모두 사용하기 때문에 훨씬 더 효율적
    -   효율 적 동작 위해 하나 이상의 응용프로그램들이 실행 가능해야 한다.

한 클러스터가 네트워크로 연결된 가수의 컴퓨터 시스템으로 구성되므로 클러스터는 고성능 계산 환경을 제공하도록 사용될 수 있다.

컴퓨터에서 응용을 병렬 수행할 수 있으므로 단일 처리기나 SMP 시스템보다 훨씬 큰 계산 능력을 제공할 수 있다.

병렬화라는 기법으로 프로그램을 컴퓨터의 개별 코어에서 혹은 클러스터의 각 컴퓨터에서 수행되는 분리된 요소로 나누는 작업을 포함한다.

전형적으로 이들 응용은 각 클러스터의 각 계산 노드가 문제 일부를 해결한 후 모든 노트의 결과를 취합하여 최종 해당을 얻는다

-   병렬 클러스터
    -   여러 호스트가 공유 저장장치 상의 동일한 데이터에 접근
    -   운영체제 대부분이 여러 호스트의 동시접근을 지원하지 않으므로
    -   병럴 클러스터는 특수 소프트웨어 버전과 특별히 발매된 응용으로 달성된다.
    -   예시. Oracle Real Application Cluster
    -   접근 충돌을 방지하기 위해 분산 잠금 관리자(distributed lock manager DLM)라는 기능은 몇몇 클러스터 기술에 포함되 있다.

스토리지 전용 네트워크 (storage-area network SAN) : 여러 호스트를 여러 저장장치에 부착할 수 있게 한다.

블록 레벨 스토리지에 대한 액세스를 제공하는 고속 데이터 전송 네트워크

데이터가 SAN에 저장된다면 클러스터 소프트웨어는 SAN에 연결된 임의의 호스트에서 수행되도록 응용을 배정할 수 있다.
