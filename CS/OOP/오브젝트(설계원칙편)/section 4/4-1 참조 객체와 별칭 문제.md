# 참조 객체와 별칭 문제

클래스도 마찬가지로 작게 만드는 것이 좋다.(그렇다면 적절한 클래스의 크기는?)

클래스를 작게 만드는 기법들
- 값객체 사용
- 단일 책임 원칙

## 게임 상품 판매
```java
public class Game {
    private String name;
    private long price;
    private double discountRate;

    public Game(String name, long price, double discountRate) {
        this.name = name;
        this.price = price;
        this.discountRate = discountRate;
    }

    public long calculateSalePrice() {
        return price - (long)Math.ceil(price * discountRate);
    }
}

public class Sales {
    private Game game;
    private int totalQuantity;
    private long totalPrice;

    public Sales(Game game) {
        this.game = game;
        this.totalQuantity = 0;
        this.totalPrice = 0;
    }

    public void addSale(int quantity) {
        this.totalQuantity += quantity;
        this.totalPrice += game.calculateSalePrice() * quantity;
    }

    public long profit() {
        return (long)Math.ceil(totalPrice * 0.2);
    }

    public long totalAmount() {
        return totalPrice;
    }
}


```
위 코드에서 영업이익을 정확하게 계산하기 위해서는 `하나의 Sales객체만`을 사용해야 함

참조객체 : 모든 클라이언트가 동일한 객체를 이용해서 오퍼레이션을 실행 일반적으로 도메인 상의 중요한 개념을 표현 가변 객체로 구현 (자바의 동등 연산자 사용시 true 반환)

별칭 : 동일한 객체를 가리키는 서로 다른 이름의 객체 참조 객체를 새로운 변수에 할당하거나 다른 객체의 메소드의 파라미터로 전달할 때 생성됨.

모든 참조변수는 동일한 참조 객체를 가리키기 때문에 하나의 참조를 통해 발생한 변경이 다른 참조로 전파됨

![alt text](<참조 전파.png>)

원하지 않는 부수효과가 발생할 수 있는 위험성이 있다. -> 상태가 바뀌지 않는 불변객체를 사용 (값 객체)